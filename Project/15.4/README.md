# Домашняя работа к занятию «Кластеры. Ресурсы под управлением облачных провайдеров»

### Цели задания 

1. Организация кластера Kubernetes и кластера баз данных MySQL в отказоустойчивой архитектуре.
2. Размещение в private подсетях кластера БД, а в public — кластера Kubernetes.

---

## Задание 1. Yandex Cloud

1. Настроить с помощью Terraform кластер баз данных MySQL.

 - Используя настройки VPC из предыдущих домашних заданий, добавить дополнительно подсеть private в разных зонах, чтобы обеспечить отказоустойчивость. 
 - Разместить ноды кластера MySQL в разных подсетях.
 - Необходимо предусмотреть репликацию с произвольным временем технического обслуживания.
 - Использовать окружение Prestable, платформу Intel Broadwell с производительностью 50% CPU и размером диска 20 Гб.
 - Задать время начала резервного копирования — 23:59.
 - Включить защиту кластера от непреднамеренного удаления.
 - Создать БД с именем `netology_db`, логином и паролем.

2. Настроить с помощью Terraform кластер Kubernetes.

 - Используя настройки VPC из предыдущих домашних заданий, добавить дополнительно две подсети public в разных зонах, чтобы обеспечить отказоустойчивость.
 - Создать отдельный сервис-аккаунт с необходимыми правами. 
 - Создать региональный мастер Kubernetes с размещением нод в трёх разных подсетях.
 - Добавить возможность шифрования ключом из KMS, созданным в предыдущем домашнем задании.
 - Создать группу узлов, состояющую из трёх машин с автомасштабированием до шести.
 - Подключиться к кластеру с помощью `kubectl`.

--- 

### Ответ:

Создан кластер MySQL из двух нод в разных private-подсетях с требуемыми в задании параметрами:</br>
![1_1](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_1.png)</br>

![1_2](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_2.png)</br>

Создана база данных и заведен пользователь:</br>

![1_3](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_3.png)</br>

Создан региональный кластер Kubernetes согласно требованиям задания:</br>

![1_4](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_4.png)</br>

Создана группа узлов с минимальным количеством 3 и автоскалированием до 6:</br>

![1_5](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_5.png)</br>

Результат работы команды `kubectl get nodes`:</br>

![1_6](https://github.com/AlekseyStroitelev/Homework/blob/main/Project/15.4/screenshots/project1_6.png)</br>

--- 
